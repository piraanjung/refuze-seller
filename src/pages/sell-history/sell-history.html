<!--
  Generated template for the PurchaseHistoryPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>ประวัติการขายขยะ</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
    <ion-grid no-padding *ngIf="user != null">
        <ion-row padding background-size container-hearder-image style="background-image: url('assets/images/background-small/10.jpg');" >
            <ion-col col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-left>
                <h1 header-title>{{user.address}}</h1>
                <h2 header-subtitle>
                  <div>อำเภอ {{user.DISTRICT_NAME}} </div>
                  <div>จังหวัด{{ user.PROVINCE_NAME }}
                    {{user.zipcode}}
                  </div>
                </h2>
            </ion-col>
            <ion-col col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-right>
                <span span-large>{{user.name}} {{user.last_name}}</span>
                <button ion-button button-clear-outline round outline>
                    <ion-icon name="phone-portrait"></ion-icon> {{ user.mobile}}
          </button> 
            </ion-col>
        </ion-row>
        </ion-grid>
        <ion-grid no-padding *ngIf="purchaseHisLists != null" id="purchase-his-list">
            <ion-row>
                <ion-col col-12 no-padding no-margin>
                    <ion-list>
                        <!--CONTENT-->
                        <ul no-margin no-padding class="collapsible">
                            <li no-margin *ngFor="let group of purchaseHisLists;">
                                <!-- Expandable Centered with header Header-->
                                <div class="collapsible-header" no-margin no-padding (click)="toggleGroup(group)">
                                    <ion-item no-padding text-center no-lines>
                                        <ion-icon icon-small>
                                            <ion-icon name="cube"></ion-icon>
                                          </ion-icon>
                                        <h2  item-title >เลขที่ : {{group.invoice}}  <span  item-subtitle>[ {{group.bought_date}} ]</span> </h2>
                                        <h2 text-center item-subtitle>{{group.balance}} บาท</h2>
                                        <h1 item-end>   <ion-icon name="ios-arrow-dropdown-outline"></ion-icon></h1>
                                    </ion-item>
                                </div>
                                <!-- Expandable Centered with header Body -->
                                <div class="item-accordion" [ngClass]="{'active': isGroupShown(group) }" [hidden]="!isGroupShown(group)">
                                        
                                  
                                  <ion-item no-lines transparent no-padding class="swipe" *ngFor="let _item of group.transactions;" >
                                          <ion-row>
                                            <ion-col col-6>
                                              <h2 item-title>{{_item.item_name}}</h2>
                                              <h2 item-subtitle style="padding-left:20px">{{_item.price}} / {{_item.unit_name}}</h2>
                                            </ion-col>
                                            <ion-col col-3>
                                              <h2 item-subtitle text-center>{{_item.amount}}</h2>
                                              <h2 item-subtitle text-center>{{_item.unit_name}}</h2>
                                            </ion-col>
                                            <ion-col col-3>
                                                <h2 item-title text-right>{{_item.balance}}</h2>
                                                <h2 item-subtitle text-right>บาท</h2>
                                              </ion-col>
                                          </ion-row>
                                    </ion-item>
                                </div>
                                <!--end-->
                            </li>
                        </ul>
                    </ion-list>
                </ion-col>
            </ion-row>
        </ion-grid>
</ion-content>
